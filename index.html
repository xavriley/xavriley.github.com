
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Xavier Riley ||= Web Developer, Guildford</title>
  <meta name="author" content="Xavier Riley">

  
  <meta name="description" content="A day without work is a day without food Zen saying. Heavy. Came across this in this great post - The 10 rules of a Zen programmer
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://xavierriley.co.uk">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Xavier Riley ||= Web Developer, Guildford" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-21587005-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Xavier Riley ||= Web Developer, Guildford</a></h1>
  
    <h2>Stuff about Ruby, Prestashop, Vim and Music</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:xavierriley.co.uk" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/13/a-day-without-work-dot-dot-dot/">A Day Without Work&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-13T22:02:00+00:00" pubdate data-updated="true">Feb 13<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>A day without work is a day without food</p></blockquote>

<p>Zen saying. Heavy.</p>

<p>Came across this in this great post - <a href="http://www.grobmeier.de/the-10-rules-of-a-zen-programmer-03022012.html">The 10 rules of a Zen programmer</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/21/7-ways-to-speed-up-your-ruby-dev-environment/">7 Ways to Speed Up Your Ruby Dev Environment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-21T20:01:00+00:00" pubdate data-updated="true">Jan 21<span>st</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://zacholman.com">Zach Holman</a> <a href="http://zachholman.com/talk/how-github-uses-github-to-build-github">gave a great talk recently</a> in which he pretty much summed up my feelings about Ruby in one of his slides;</p>

<blockquote><p>&#8220;Ruby is so fast, I love it so much. Not computationally speaking of
course, cos in that sense its slow as f&#8230;&#8221;</p></blockquote>

<p>That said, if you&#8217;re working with it all day it pays to get it working
as fast as you can so here&#8217;s some stuff I&#8217;ve cobbled together in the
hope that it speeds up your dev workflow.</p>

<h2>1) Use bundler &#8211;pre</h2>

<p>If you&#8217;re waiting forever for gems to install with bundler, make sure
you&#8217;re using the new 1.1 rc. Not convinced?</p>

<p>If you want to read up on why it&#8217;s so much faster <a href="http://patshaughnessy.net/2011/10/14/why-bundler-1-1-will-be-much-faster">there&#8217;s a great write
up by Pat Shaughnessy over here</a></p>

<h2>2) Ride the Unicorn</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install unicorn
</span><span class='line'>unicorn_rails</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;ve found <a href="http://patshaughnessy.net/2011/10/14/why-bundler-1-1-will-be-much-faster">Unicorn</a> to be a better server for local development compared
with mongrel or thin. Works with any Rack based applications too.</p>

<h2>3) Make Vhosts config a thing of the past with Pow!!</h2>

<blockquote><p><a href="http://pow.cx/">Pow</a> is a zero-config Rack server for Mac OS X. Have it serving your apps locally in under a minute.</p></blockquote>

<p>If you&#8217;re managing multiple sites (as most devs are) Pow is a useful
server to have for Rack and Rails apps. Getting a site set up is as
simple as symlinking into a folder and it&#8217;s ready to view at foobar.dev</p>

<p>That said, I found it to be a bit of a pain running alongside a local
Apache install (for PHP sites) as it screwed with the /etc/hosts. That
was until I discovered <a href="https://github.com/Rodreegez/powder.git">Powder</a>
which gives you some shell commands for getting Pow!! to play nicely
with the other servers.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install powder
</span><span class='line'>powder link # Symlinks the current folder
</span><span class='line'>powder applog # Tails the current application logfile
</span><span class='line'>
</span><span class='line'># My personal favourites
</span><span class='line'>powder up   # Enable pow
</span><span class='line'>powder down # Disable pow</span></code></pre></td></tr></table></div></figure>


<h2>4) Speed up your Rails boot time with Ruby 1.9.3 or 1.9.2-head</h2>

<p>My namesake <a href="http://rhnh.net/2011/05/28/speeding-up-rails-startup-time">Xavier Shay identified a big win in speeding up how Rails
requires
files.</a>. The
patch subsequently made it into Ruby 1.9.3 and a 1.9.2 patch, but it
doesn&#8217;t affect the earlier 1.8.7 or Ree. If you haven&#8217;t done it already,
update using the following commands (assuming you&#8217;re using RVM).</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm get head
</span><span class='line'>rvm install 1.9.3
</span><span class='line'>## or
</span><span class='line'>rvm install 1.9.2-head</span></code></pre></td></tr></table></div></figure>


<p>Enjoy the faster boot times.</p>

<h2>5) Speed up all your Gem installations by using your .rvmrc file</h2>

<p>RVM can have global settings specified in a .rvmrc file. My preference
is to do without the ri and rdoc when I&#8217;m installing a gem, as I&#8217;m
pretty happy being able to either look it up or install when needed. You
can do the same with the following commands. First off, create the file
in your home folder using your preffered text editor&#8230;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vi ~/.rvmrc</span></code></pre></td></tr></table></div></figure>


<p>and here&#8217;s what I use to get you started.</p>

<figure class='code'><figcaption><span>Sample of my .rvmrc file </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">rvm_gem_options</span><span class="o">=</span><span class="s2">&quot;--no-rdoc --no-ri&quot;</span>
</span><span class='line'><span class="nv">rvm_archflags</span><span class="o">=</span><span class="s2">&quot;-arch x86_64&quot;</span> <span class="c">#useful for avoiding errors with natively</span>
</span><span class='line'>compiled gems
</span><span class='line'><span class="nv">rvm_make_flags</span><span class="o">=</span><span class="s2">&quot;-j 3&quot;</span> <span class="c"># Where 2 is the number of cores + 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>See here <a href="http://hints.macworld.com/article.php?story=20070524074057479">about optimising your make builds</a>. It&#8217;s not guaranteed to help but it doesn&#8217;t hurt either.</p>

<h2>6) Save time in development mode with the Active Reload gem</h2>

<p>Given that this has made its way into the Rails core now, its fair to
say the developer was onto something. Instead of requiring the zillion
core files of Rails on every page view in development mode, this Gem
cleverly only pulls in the ones that have changed based on their
timestamp. <a href="https://github.com/paneq/active_reload">You can check out the gem here</a> or just add the following to your Gemfile;</p>

<figure class='code'><figcaption><span>Sample of my .rvmrc file </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>  group :development <span class="k">do</span>
</span><span class='line'><span class="k">    </span>gem <span class="s1">&#39;active_reload&#39;</span>
</span><span class='line'>  end
</span></code></pre></td></tr></table></div></figure>


<p>and then run bundle. Works really well on big Rails apps like Spree and
Radiant.</p>

<h2>7) Get a f***ing SSD</h2>

<p>Not that it&#8217;s strictly a Rails dev thing, but this video from <a href="http://www.fastly.com/">Fastly</a> CEO
Artur Bergman presents a &#8220;compelling&#8221; argument for why you need an SSD
in your life.</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/H7PJ1oeEyGg" frameborder="0" allowfullscreen></iframe>


<p>That&#8217;s it for now. Any other suggestions please stick them in a comment
or get me on twitter.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/03/transferring-customers-from-prestashop-to-magento/">Transferring Customers From Prestashop to Magento</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-03T00:00:00+01:00" pubdate data-updated="true">Sep 3<span>rd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There’s always debate about which ecommerce platform is harder/better/faster/stronger, and from experience of Prestashop and Magento I can say they’re both really good for different types of shops. For <a href="http::www.forsyths.co.uk/">Forsyths</a>, I developed a Prestashop solution for their Sheet Music department whilst I was working there and it’s been great so far but…</p>

<p><del>When picking a solution it really pays to do some forward planning and in this case, Prestashop can’t scale up to the kind of multi-store functionality that this music department store needed. That said, it was a lot easier getting a Prestashop store off the ground (I tried both at the start) and it’s served us well. My only gripe is that Prestashop’s module and templating system isn’t flexible enough to make real changes without editing the core – and that screws up future updates. Not what you need for ecommerce purposes.</del></p>

<p><em>UPDATE</em>
Since writing this, it&#8217;s all change with Prestashop v1.5
They&#8217;ve had a basic overrides system in place for a while now.
Also the new version supports multistore but I haven&#8217;t used it, yet&#8230;</p>

<p>** Making the switch</p>

<p>Swapping out the products from PS to Mage is pretty straightforward – it’s just a case of a mysql query which maps them into the right fields. As with any Magento import the process is more or less similar;</p>

<ul>
<li>Add some dummy data into Magento, using all the fields you’re likely to use</li>
<li>Export the data as a csv using System > Import/Export > Profiles</li>
<li>Look at the file in your var/export folder and take a look at the headers</li>
</ul>


<p>Tip for *nix users working with csv files – in terminal use the following command to save the first two lines to a file;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>head -n 2 your_csv_file.csv &gt; your_csv_file_head.csv
</span></code></pre></td></tr></table></div></figure>


<p>That’s if your csv file is really big.</p>

<p>** The problem with users</p>

<p>Now the above works fine for most things, but the problem with users lies in the different authentication that both shops use. Magento uses MD5 with a salt on the end, Prestashop uses a ‘Cookie Key’ prefix to the customer password, which is then MD5 encrypted.
Anyone who’s looked into MD5 knows that this is a pig – you can’t reverse an MD5 into plain text, therefore you can’t get the original password strings in order to re-encode them (which is actually a good thing…).</p>

<p>** How to fix it</p>

<p>Clearly its impossible to convert from one MD5 hash to another so we have to try something different. Make the following file;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>magentoroot<span class="o">)</span>/app/code/local/Mage/Customer/Model/Customer.php
</span></code></pre></td></tr></table></div></figure>


<p>and in it put the following;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">class Mage_Customer_Model_Customer extends Mage_Core_Model_Abstract</span>
</span><span class='line'><span class="x">{</span>
</span><span class='line'><span class="x">/**</span>
</span><span class='line'><span class="x">* Authenticate customer</span>
</span><span class='line'><span class="x">*</span>
</span><span class='line'><span class="x">* @param string $login</span>
</span><span class='line'><span class="x">* @param string $password</span>
</span><span class='line'><span class="x">* @return true</span>
</span><span class='line'><span class="x">* @throws Exception</span>
</span><span class='line'><span class="x">*/</span>
</span><span class='line'><span class="x">public function authenticate($login, $password)</span>
</span><span class='line'><span class="x">{</span>
</span><span class='line'>
</span><span class='line'><span class="x">$this-&gt;loadByEmail($login);</span>
</span><span class='line'><span class="x">if ($this-&gt;getConfirmation() &amp;&amp; $this-&gt;isConfirmationRequired()) {</span>
</span><span class='line'><span class="x">throw Mage::exception(&#39;Mage_Core&#39;, Mage::helper(&#39;customer&#39;)-&gt;__(&#39;This account is not confirmed.&#39;),</span>
</span><span class='line'><span class="x">self::EXCEPTION_EMAIL_NOT_CONFIRMED</span>
</span><span class='line'><span class="x">);</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">if (!$this-&gt;validatePassword($password) &amp;&amp; !$this-&gt;validatePassword(&#39;hKvthisisyourgibberishcookiestringfromprestashopCM&#39;.$password)) {</span>
</span><span class='line'><span class="x">throw Mage::exception(&#39;Mage_Core&#39;, Mage::helper(&#39;customer&#39;)-&gt;__(&#39;Invalid login or password.&#39;),</span>
</span><span class='line'><span class="x">self::EXCEPTION_INVALID_EMAIL_OR_PASSWORD</span>
</span><span class='line'><span class="x">);</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">Mage::dispatchEvent(&#39;customer_customer_authenticated&#39;, array(</span>
</span><span class='line'><span class="x">&#39;model&#39; =&gt; $this,</span>
</span><span class='line'><span class="x">&#39;password&#39; =&gt; $password,</span>
</span><span class='line'><span class="x">));</span>
</span><span class='line'><span class="x">return true;</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'>
</span><span class='line'><span class="x">//end class</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice the random string prepended to the password variable? That’s your cookie string which you’ll find in your Prestashop install here;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">(prestshop root)/config/settings.inc.php</span>
</span></code></pre></td></tr></table></div></figure>


<p>It’s the line beginning</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">define(&#39;_COOKIE_KEY_&#39;, &#39;ThisIsTheBitYouWant...&#39; </span>
</span></code></pre></td></tr></table></div></figure>


<p>Believe it or not that’s all you need to do. Import your MD5 hashes from Prestashop straight into Magento and it’ll authenticate them as Prestashop would do. I’ll go through the mysql import in another post.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/02/13/a-day-without-work-dot-dot-dot/">A day without work&#8230;</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/21/7-ways-to-speed-up-your-ruby-dev-environment/">7 Ways to speed up your Ruby Dev Environment</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/09/03/transferring-customers-from-prestashop-to-magento/">Transferring Customers From Prestashop To Magento</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/xavierRiley">@xavierRiley</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'xavierRiley',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("xavriley", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/xavriley" class="twitter-follow-button" data-show-count="false">Follow @xavriley</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/xavriley?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/xavriley">My Delicious Bookmarks &raquo;</a></p>
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/105297353634459881009?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Xavier Riley -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'xavierriley';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
