
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Transferring Customers From Prestashop To Magento - Xavier Riley - Web Developer, Guildford</title>
	<meta name="author" content="">

	
	<meta name="description" content="There’s always debate about which ecommerce platform is harder/better/faster/stronger, and from experience of Prestashop and Magento I can say they’ &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Xavier Riley - Web Developer, Guildford" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Xavier Riley - Web Developer, Guildford</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:www.xavierriley.co.uk">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/xavriley" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/xavriley" title="GitHub">GitHub</a>
		
		
		
		
		<a class="delicious" href="http://delicious.com/xavriley" title="Delicious">Delicious</a>
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:www.xavierriley.co.uk">
	</form>
</nav>

</header>
	
		
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/xavriley">xavriley</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('xavriley', 4, false);
	})(jQuery);
</script>

	
	<div id="content" class="inner">
		<article class="post">
	<h1 class="title">Transferring Customers From Prestashop to Magento</h1>
	<div class="entry-content"><p>There’s always debate about which ecommerce platform is harder/better/faster/stronger, and from experience of Prestashop and Magento I can say they’re both really good for different types of shops. For <a href="http::www.forsyths.co.uk/">Forsyths</a>, I developed a Prestashop solution for their Sheet Music department whilst I was working there and it’s been great so far but…</p>

<p><del>When picking a solution it really pays to do some forward planning and in this case, Prestashop can’t scale up to the kind of multi-store functionality that this music department store needed. That said, it was a lot easier getting a Prestashop store off the ground (I tried both at the start) and it’s served us well. My only gripe is that Prestashop’s module and templating system isn’t flexible enough to make real changes without editing the core – and that screws up future updates. Not what you need for ecommerce purposes.</del></p>

<p><em>UPDATE</em>
Since writing this, it&#8217;s all change with Prestashop v1.5
They&#8217;ve had a basic overrides system in place for a while now.
Also the new version supports multistore but I haven&#8217;t used it, yet&#8230;</p>

<p>** Making the switch</p>

<p>Swapping out the products from PS to Mage is pretty straightforward – it’s just a case of a mysql query which maps them into the right fields. As with any Magento import the process is more or less similar;</p>

<ul>
<li>Add some dummy data into Magento, using all the fields you’re likely to use</li>
<li>Export the data as a csv using System > Import/Export > Profiles</li>
<li>Look at the file in your var/export folder and take a look at the headers</li>
</ul>


<p>Tip for *nix users working with csv files – in terminal use the following command to save the first two lines to a file;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>head -n 2 your_csv_file.csv &gt; your_csv_file_head.csv
</span></code></pre></td></tr></table></div></figure>


<p>That’s if your csv file is really big.</p>

<p>** The problem with users</p>

<p>Now the above works fine for most things, but the problem with users lies in the different authentication that both shops use. Magento uses MD5 with a salt on the end, Prestashop uses a ‘Cookie Key’ prefix to the customer password, which is then MD5 encrypted.
Anyone who’s looked into MD5 knows that this is a pig – you can’t reverse an MD5 into plain text, therefore you can’t get the original password strings in order to re-encode them (which is actually a good thing…).</p>

<p>** How to fix it</p>

<p>Clearly its impossible to convert from one MD5 hash to another so we have to try something different. Make the following file;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">(</span>magentoroot<span class="o">)</span>/app/code/local/Mage/Customer/Model/Customer.php
</span></code></pre></td></tr></table></div></figure>


<p>and in it put the following;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">class Mage_Customer_Model_Customer extends Mage_Core_Model_Abstract</span>
</span><span class='line'><span class="x">{</span>
</span><span class='line'><span class="x">/**</span>
</span><span class='line'><span class="x">* Authenticate customer</span>
</span><span class='line'><span class="x">*</span>
</span><span class='line'><span class="x">* @param string $login</span>
</span><span class='line'><span class="x">* @param string $password</span>
</span><span class='line'><span class="x">* @return true</span>
</span><span class='line'><span class="x">* @throws Exception</span>
</span><span class='line'><span class="x">*/</span>
</span><span class='line'><span class="x">public function authenticate($login, $password)</span>
</span><span class='line'><span class="x">{</span>
</span><span class='line'>
</span><span class='line'><span class="x">$this-&gt;loadByEmail($login);</span>
</span><span class='line'><span class="x">if ($this-&gt;getConfirmation() &amp;&amp; $this-&gt;isConfirmationRequired()) {</span>
</span><span class='line'><span class="x">throw Mage::exception(&#39;Mage_Core&#39;, Mage::helper(&#39;customer&#39;)-&gt;__(&#39;This account is not confirmed.&#39;),</span>
</span><span class='line'><span class="x">self::EXCEPTION_EMAIL_NOT_CONFIRMED</span>
</span><span class='line'><span class="x">);</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">if (!$this-&gt;validatePassword($password) &amp;&amp; !$this-&gt;validatePassword(&#39;hKvthisisyourgibberishcookiestringfromprestashopCM&#39;.$password)) {</span>
</span><span class='line'><span class="x">throw Mage::exception(&#39;Mage_Core&#39;, Mage::helper(&#39;customer&#39;)-&gt;__(&#39;Invalid login or password.&#39;),</span>
</span><span class='line'><span class="x">self::EXCEPTION_INVALID_EMAIL_OR_PASSWORD</span>
</span><span class='line'><span class="x">);</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">Mage::dispatchEvent(&#39;customer_customer_authenticated&#39;, array(</span>
</span><span class='line'><span class="x">&#39;model&#39; =&gt; $this,</span>
</span><span class='line'><span class="x">&#39;password&#39; =&gt; $password,</span>
</span><span class='line'><span class="x">));</span>
</span><span class='line'><span class="x">return true;</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'>
</span><span class='line'><span class="x">//end class</span>
</span><span class='line'><span class="x">}</span>
</span><span class='line'><span class="x">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice the random string prepended to the password variable? That’s your cookie string which you’ll find in your Prestashop install here;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">(prestshop root)/config/settings.inc.php</span>
</span></code></pre></td></tr></table></div></figure>


<p>It’s the line beginning</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">define(&#39;_COOKIE_KEY_&#39;, &#39;ThisIsTheBitYouWant...&#39; </span>
</span></code></pre></td></tr></table></div></figure>


<p>Believe it or not that’s all you need to do. Import your MD5 hashes from Prestashop straight into Magento and it’ll authenticate them as Prestashop would do. I’ll go through the mysql import in another post.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2010-09-03 00:00:00 +0100" pubdate data-updated="true">Sep 3<span>rd</span>, 2010</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/prestashop/'>prestashop</a>


</div>
	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="goodreads">
  <style type="text/css" media="screen">
  #goodreads {
    padding: 30px 0;
    border-top: 1px solid #fff;
    border-bottom: 1px solid #ddd;
  }

  #goodreads h2.gr_custom_header_1357915949 {
    font-size: 25px;
    font-weight: 300;
    line-height: 35px;
    margin-bottom: 35px;
  }

  #goodreads center {
    margin-top: 35px;
  }

  .gr_custom_each_container_1357915949 {
    /* customize each individual book container here */
    float: left;
    margin: 0 50px;
  }
  
  .gr_custom_title_1357915949 {
    width: 100px;
  }
  </style>
  <!-- Show static HTML/CSS as a placeholder in case js is not enabled - javascript include will override this if things work -->
  <!-- style type="text/css" media="screen">
  .gr_custom_container_1357915949 {
    /* customize your Goodreads widget container here*/
    border: 1px solid gray;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    padding: 10px 5px 10px 5px;
    background-color: #FFFFFF;          
    color: #000000;          
    width: 300px
  }
  .gr_custom_header_1357915949 {
    /* customize your Goodreads header here*/
    border-bottom: 1px solid gray;
    width: 100%;
    margin-bottom: 5px;
    text-align: center;
    font-size: 120%
  }
  .gr_custom_each_container_1357915949 {
    /* customize each individual book container here */
    width: 100%;
    clear: both;
    margin-bottom: 10px;
    overflow: auto;
    padding-bottom: 4px;
    border-bottom: 1px solid #aaa;
  }
  .gr_custom_book_container_1357915949 { 
    /* customize your book covers here */
    overflow: hidden;
    height: 60px;
    float: left;
    margin-right: 4px;
    width: 39px;
  }
  .gr_custom_author_1357915949 {
    /* customize your author names here */
    font-size: 10px;
  }
  .gr_custom_tags_1357915949 {
    /* customize your tags here */
    font-size: 10px;
    color: gray;
  }
  .gr_custom_rating_1357915949 {
    /* customize your rating stars here */
    float: right;
  }
</style-->
<br style="clear: both"/>
<div id="gr_custom_widget_1357915949">
  <div class="gr_custom_container_1357915949">
    <br style="clear: both"/>
    
    <noscript>
      Share <a href="http://www.goodreads.com/">book reviews</a> and ratings with Xavier, and even join a <a href="http://www.goodreads.com/group">book club</a> on Goodreads.
    </noscript>
  </div>
</div>

<script async="async" src="http://www.goodreads.com/review/custom_widget/10266117.What%20I've%20been%20reading?cover_position=left&cover_size=small&num_books=5&order=d&shelf=read&show_author=1&show_cover=1&show_rating=0&show_review=0&show_tags=0&show_title=1&sort=date_added&widget_bg_color=FFFFFF&widget_bg_transparent=&widget_border_width=1&widget_id=1357915949&widget_text_color=000000&widget_title_size=medium&widget_width=medium" type="text/javascript" charset="utf-8"></script>
</section>


		<section id="goodreads">
  <style type="text/css" media="screen">
  #goodreads {
    padding: 30px 0;
    border-top: 1px solid #fff;
    border-bottom: 1px solid #ddd;
  }

  #goodreads h2.gr_custom_header_1357915949 {
    font-size: 25px;
    font-weight: 300;
    line-height: 35px;
    margin-bottom: 35px;
  }

  #goodreads center {
    margin-top: 35px;
  }

  .gr_custom_each_container_1357915949 {
    /* customize each individual book container here */
    float: left;
    margin: 0 50px;
  }
  
  .gr_custom_title_1357915949 {
    width: 100px;
  }
  </style>
  <!-- Show static HTML/CSS as a placeholder in case js is not enabled - javascript include will override this if things work -->
  <!-- style type="text/css" media="screen">
  .gr_custom_container_1357915949 {
    /* customize your Goodreads widget container here*/
    border: 1px solid gray;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    padding: 10px 5px 10px 5px;
    background-color: #FFFFFF;          
    color: #000000;          
    width: 300px
  }
  .gr_custom_header_1357915949 {
    /* customize your Goodreads header here*/
    border-bottom: 1px solid gray;
    width: 100%;
    margin-bottom: 5px;
    text-align: center;
    font-size: 120%
  }
  .gr_custom_each_container_1357915949 {
    /* customize each individual book container here */
    width: 100%;
    clear: both;
    margin-bottom: 10px;
    overflow: auto;
    padding-bottom: 4px;
    border-bottom: 1px solid #aaa;
  }
  .gr_custom_book_container_1357915949 { 
    /* customize your book covers here */
    overflow: hidden;
    height: 60px;
    float: left;
    margin-right: 4px;
    width: 39px;
  }
  .gr_custom_author_1357915949 {
    /* customize your author names here */
    font-size: 10px;
  }
  .gr_custom_tags_1357915949 {
    /* customize your tags here */
    font-size: 10px;
    color: gray;
  }
  .gr_custom_rating_1357915949 {
    /* customize your rating stars here */
    float: right;
  }
</style-->
<br style="clear: both"/>
<div id="gr_custom_widget_1357915949">
  <div class="gr_custom_container_1357915949">
    <br style="clear: both"/>
    
    <noscript>
      Share <a href="http://www.goodreads.com/">book reviews</a> and ratings with Xavier, and even join a <a href="http://www.goodreads.com/group">book club</a> on Goodreads.
    </noscript>
  </div>
</div>

<script async="async" src="http://www.goodreads.com/review/custom_widget/10266117.What%20I've%20been%20reading?cover_position=left&cover_size=small&num_books=5&order=d&shelf=read&show_author=1&show_cover=1&show_rating=0&show_review=0&show_tags=0&show_title=1&sort=date_added&widget_bg_color=FFFFFF&widget_bg_transparent=&widget_border_width=1&widget_id=1357915949&widget_text_color=000000&widget_title_size=medium&widget_width=medium" type="text/javascript" charset="utf-8"></script>
</section>

	</div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Xavier Riley - Web Developer, Guildford

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'xavriley'; // Required - Replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-21587005-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>